{%load static%}
<!DOCTYPE html>
<html lang="en">

	<head>
		<title></title>
		<link rel="stylesheet" type="text/css" href="{%static 'navbar.css'%}" />
		<link rel="stylesheet" type="text/css" href="{%static 'footer.css'%}" />
		<link rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
		<script src="https://kit.fontawesome.com/a076d05399.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
		{%block headtag%} {%endblock%}
		<link rel="stylesheet" type="text/css" href="{% static 'loader.css' %}" />

	</head>

	<body>
		<div class="pre-loader">
			<div class="pre-loader-dots"></div>
			<div class="pre-loader-dots"></div>
			<div class="pre-loader-dots"></div>
			<div class="pre-loader-dots"></div>
		</div>
		<header class="header">
			<a href="#" class="logo"><img width="40" src="{% static 'logo.png' %}" alt="logo" /></a>
			<form class="navFormFields " action="{% url 'front_search' %}" method="GET">
				<input class="navSearch" type="text" placeholder="Search" name="search_query" />
				<select class="form-select BoxGenre Box" id="genre" name="genre">
					<!-- genres will get loaded to the select with id genre  -->
					<option value="">select genre</option>
				</select>
				<button class="navButton" type="submit">
					<em class="fa fa-search"></em>
				</button>
			</form>
			<div class='left'>
				
				<div class="menuToggle" onclick="toggle()" id="bars">
					<em class="fa fa-bars"></em>
				</div>
			</div>

			<ul class="menu">

				<li><a href="{% url 'index' %}">Home</a></li>
				<li><a href="{% url 'index' %}#contact">Contact Us</a></li>
				{% if user.is_authenticated %}
				<li class="hello-msg">Hello, {{request.user.username}}</li>
				<li><a class="hello-msg" href="{% url 'logout' %}">Logout</a></li>

				{% else %}

				<li><a href="{% url 'signin' %}">Login</a></li>
				<li><a href="{% url 'signup' %}">Sign Up</a></li>
				{% endif %}
			</ul>
		</header>

		{%block content%} {%endblock%}
		<section>
			<footer id="mu-footer">
				<div class="container">
					<div class="row">
						<div class="col-md-12">
							<div class="mu-footer-area">
								<div class="mu-footer-social">
									<a href="#"><span class="fa fa-facebook"></span></a>
									<a href="#"><span class="fa fa-twitter"></span></a>
									<a href="#"><span class="fa fa-google-plus"></span></a>
									<a href="#"><span class="fa fa-linkedin"></span></a>
									<a href="#"><span class="fa fa-youtube"></span></a>
								</div>
								<div class="mu-footer-copyright">
									<p>
										&copy; Copyright
										<a rel="nofollow" href="#">smartlocalguide.io</a>. All right
										reserved.
									</p>
								</div>
								<p>Mail issues @ smartlocalguide@gmail.com</p>
							</div>
						</div>
					</div>
				</div>
			</footer>
		</section>
		<script type="text/javascript">
			$(window).on('load', () => {
				$(".pre-loader").fadeOut("slow");
				$("body").css({ 'overflow': 'visible' });
			});

			window.addEventListener("scroll", function () {
				const header = document.querySelector("header");
				header.classList.toggle("sticky", window.scrollY > 0);
			});

			function toggle() {
				const menuToggle = document.querySelector(".menuToggle");
				const menu = document.querySelector(".menu");
				menuToggle.classList.toggle("active");
				menu.classList.toggle("active");
			}

			$(document).ready(function () {

				$(".slideSearch .fa").click(function () {
					console.log("clicked")
					$(".slideSearch").toggleClass("activeSearch");
				});

				$.getJSON("{% url 'api_all_genres' %}")
					.done((data) => {
						data.forEach(genre => {
							$('#genre').append(`<option>${genre}</option>`)
						});
					});

			});

		</script>
	</body>

</html>